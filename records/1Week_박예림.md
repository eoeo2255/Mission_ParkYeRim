# [1Week] 박예림

## 할일

- [x] 호감상대 삭제
    - [x] 삭제 전 해당 항목에 대한 소유권이 본인(로그인한 사람)에게 있는지 체크
    - [x] 호감목록 페이지에서 특정 항목 삭제버튼을 누르면, 해당 항목삭제
    - [x] 삭제 후 다시 호감목록 페이지로 돌아오기
-  [ ] 구글 로그인
    - [x] 구글로그인 클릭 시 로그인 창 연결
    - [ ] 구글로그인 완료로 Member 생성
    - [ ] 로그인에 성공 후 메인으로 이동
    - [x] 구글 클라이언트 id와 패스워드 환경변수 처리

---

## 접근 방법

**[컨트롤러]**
  - list.html 에서 인스타유저의 호감 삭제 버튼을 누르면 해당 인스타 유저의 likeablePerson id 값을 가져온다. (feat.타임리프)
  - id 값을 likeablePerson 레포지토리에서 찾을 때, 없을 경우에 대한 예외처리를 해준다.
  - 삭제 버튼을 클릭했을 때 Rq에 저장되어 있는 InstaMember의 username과, 삭제할 likeablePerson의 FromInstaMemberUsername을 비교해서 동일하면 삭제된다.
  - 삭제 후 redirect를 통해 호감목록 페이지로 돌아온다.

**[서비스]**
- 레포지토리에서 컨트롤러로부터 넘겨받은 likeablePerson을 찾아 삭제한다.

**[Trouble]**
- 타임리프로 InstaMember의 id를 가져올 때, h:id="@{|${likeablePerson.id}|}" 여기서 '|'기호를 빼먹어서 템플릿을 불러오지 못하는 오류가 발생
  - 실습예제 위주로 타임리프 문법 한번 더 확인
- 서비스의 @Transactional(readOnly = true)로 인해서 삭제 메서드를 구현했음에도 DB에 변화 없음. delete함수에 @Transactional 어노테이션을 붙임
  - 습예제 위주로 어노테이션기능 한번 더 살펴보기
- 삭제권한 확인하는 과정에서 if문 조건절 작성에 오랜 시간 소요
  - 비교하고자 하는 데이터가 무엇인지 명확하게 정한 뒤, 해당 데이터들을 비교할 수 있도록 데이터들 간 관계를 확실히 파악한 후 필요한 필드와 메서드를 생성

---
## 특이사항


  **참고: [Refactoring]**

    - 삭제권한을 얻는 과정에서 String 변수를 두번이나 선언 했으나 줄일 수 있지 않을까? 해당 부분 냄새나는 코드 제거